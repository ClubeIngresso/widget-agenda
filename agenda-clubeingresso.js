var agendaClubeIngresso=function(){"use strict";function a(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"!=typeof g&&"function"!=typeof g&&(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&("object"!=typeof c||c.nodeType||null!=c&&c===c.window||(b=Array.isArray(c)))?(b?(b=!1,f=a&&Array.isArray(a)?a:[]):f=a&&("object"!=typeof a||a.nodeType||null!=a&&a===a.window)?a:{},g[d]=this.extend(j,f,c)):void 0!==c&&(g[d]=c));return g}var b,c,d="http://api.clubeingresso.com.br",e={categoria:"busca",cidade:!1,estado:!1,genero:!1,qtd:10};return b={init:function(b,d){a(e,d),c=document.querySelector(b);var f=this.handlerInitErrors();f||(this.buildWidget(),this.callAjax())},handlerInitErrors:function(){return"busca"!==e.categoria&&"show"!==e.categoria&&"festa"!==e.categoria&&"esporte"!==e.categoria&&"teatro"!==e.categoria?(console.error("Categoria Inválida"),!0):c?e.cidade&&e.estado?(console.error("Você não pode usar uma cidade e um estado juntos como parametro"),!0):!1:(console.error("Container Inválido"),!0)},buildWidget:function(){var a,b="Ingressos";e.genero&&(b=b+" de "+e.genero),(e.cidade||e.estado)&&(b=b+" - "+(e.estado||e.cidade)),a='<div class="widgetClubeIngresso">				<div class="wci-header">'+b+'</div>				<div class="wci-container">					<img class="wci-loading" src="loading.gif" width="30" height="28" alt="Carregando apresentações..." title="Carregando apresentações...">				</div>				<p class="wci-footer">Plugin social <a href="http://clubeingresso.com.br" target="_blank">ClubeIngresso</a></p>			</div>',c.innerHTML=a},callAjax:function(){var a=new XMLHttpRequest,b=this,c="",f="",g="",h="";e.genero&&(c="&genero="+e.genero),e.cidade&&(f="&cidade="+e.cidade),e.estado&&(g="&estado="+e.estado),"busca"!==e.categoria&&(h="&genero="+e.genero),a.open("GET",d+"/busca?busca=&pagina=1&perpage="+e.qtd+c+f+g+h,!0),a.onreadystatechange=function(){var c,d=!0;4===this.readyState&&(this.status>=200&&this.status<400&&(c=JSON.parse(a.responseText),c.success===!0&&(b.buildListaApresentacoes(c.result),d=!1)),d&&(document.querySelector(".wci-container").innerHTML='<ul><li class="wci-zeroEvents">Desculpe, ocorreu um erro.<br> Visite o <a href="http://clubeingresso.com.br/">ClubeIngresso</a> para ver os ultimos eventos na integra</li></ul>'))},a.send(null),a=null},buildListaApresentacoes:function(a){var b="<ul>",c=this;a.length?a.forEach(function(a){var d=c.buildPermalink(a),e=c.trataData(a.data);b+='<li>						<a href="'+d+'" title="'+a.evento+'">							<img class="wci-foto" src="https://s3.amazonaws.com/shows.eventos.clubeingresso.com.br/imagens/'+a.foto+'" alt="'+a.evento+'" title="'+a.evento+'">							<div class="wci-infos">								<div class="wci-title">'+a.evento+'</div>								<div class="wci-info">									'+a.cidade+"/"+a.estado+"<br>									"+e+"								</div>							</div>						</a>					</li>"}):b+='<li class="wci-zeroEvents">Desculpe, não existem eventos próximos</li>',b+="</ul>",document.querySelector(".wci-container").innerHTML=b},buildPermalink:function(a){var b,c="http://clubeingresso.com.br/";switch(a.secao){case"Shows":b="show";break;case"Festas":b="festa";break;case"Esporte":b="esporte";break;case"Teatro":b="teatro"}return c+b+"/"+a.permalink},trataData:function(a){var b=new Date(a).getUTCDate(),c=new Date(a).getUTCMonth(),d=new Date(a).getUTCFullYear(),e=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];return b+" de "+e[c]+" de "+d}}}();window.agendaClubeIngresso=Object.create(agendaClubeIngresso);